<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF8" http-equiv="Content-Type">

<title>README - LibXML</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body class="file">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="./HISTORY.html">HISTORY</a>
  
    <li class="file"><a href="./LICENSE.html">LICENSE</a>
  
    <li class="file"><a href="./README_rdoc.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./LibXML.html">LibXML</a>
  
    <li><a href="./LibXML/XML.html">LibXML::XML</a>
  
    <li><a href="./LibXML/XML/Attr.html">LibXML::XML::Attr</a>
  
    <li><a href="./LibXML/XML/AttrDecl.html">LibXML::XML::AttrDecl</a>
  
    <li><a href="./LibXML/XML/Attributes.html">LibXML::XML::Attributes</a>
  
    <li><a href="./LibXML/XML/Document.html">LibXML::XML::Document</a>
  
    <li><a href="./LibXML/XML/Dtd.html">LibXML::XML::Dtd</a>
  
    <li><a href="./LibXML/XML/Encoding.html">LibXML::XML::Encoding</a>
  
    <li><a href="./LibXML/XML/Error.html">LibXML::XML::Error</a>
  
    <li><a href="./LibXML/XML/HTMLParser.html">LibXML::XML::HTMLParser</a>
  
    <li><a href="./LibXML/XML/HTMLParser/Context.html">LibXML::XML::HTMLParser::Context</a>
  
    <li><a href="./LibXML/XML/HTMLParser/Options.html">LibXML::XML::HTMLParser::Options</a>
  
    <li><a href="./LibXML/XML/InputCallbacks.html">LibXML::XML::InputCallbacks</a>
  
    <li><a href="./LibXML/XML/Namespace.html">LibXML::XML::Namespace</a>
  
    <li><a href="./LibXML/XML/Namespaces.html">LibXML::XML::Namespaces</a>
  
    <li><a href="./LibXML/XML/Node.html">LibXML::XML::Node</a>
  
    <li><a href="./LibXML/XML/Parser.html">LibXML::XML::Parser</a>
  
    <li><a href="./LibXML/XML/Parser/Context.html">LibXML::XML::Parser::Context</a>
  
    <li><a href="./LibXML/XML/Parser/Options.html">LibXML::XML::Parser::Options</a>
  
    <li><a href="./LibXML/XML/Reader.html">LibXML::XML::Reader</a>
  
    <li><a href="./LibXML/XML/RelaxNG.html">LibXML::XML::RelaxNG</a>
  
    <li><a href="./LibXML/XML/SaxParser.html">LibXML::XML::SaxParser</a>
  
    <li><a href="./LibXML/XML/SaxParser/Callbacks.html">LibXML::XML::SaxParser::Callbacks</a>
  
    <li><a href="./LibXML/XML/SaxParser/VerboseCallbacks.html">LibXML::XML::SaxParser::VerboseCallbacks</a>
  
    <li><a href="./LibXML/XML/Schema.html">LibXML::XML::Schema</a>
  
    <li><a href="./LibXML/XML/Schema/Attribute.html">LibXML::XML::Schema::Attribute</a>
  
    <li><a href="./LibXML/XML/Schema/Element.html">LibXML::XML::Schema::Element</a>
  
    <li><a href="./LibXML/XML/Schema/Facet.html">LibXML::XML::Schema::Facet</a>
  
    <li><a href="./LibXML/XML/Schema/Namespaces.html">LibXML::XML::Schema::Namespaces</a>
  
    <li><a href="./LibXML/XML/Schema/Type.html">LibXML::XML::Schema::Type</a>
  
    <li><a href="./LibXML/XML/Schema/Types.html">LibXML::XML::Schema::Types</a>
  
    <li><a href="./LibXML/XML/Writer.html">LibXML::XML::Writer</a>
  
    <li><a href="./LibXML/XML/XInclude.html">LibXML::XML::XInclude</a>
  
    <li><a href="./LibXML/XML/XPath.html">LibXML::XML::XPath</a>
  
    <li><a href="./LibXML/XML/XPath/Context.html">LibXML::XML::XPath::Context</a>
  
    <li><a href="./LibXML/XML/XPath/Expression.html">LibXML::XML::XPath::Expression</a>
  
    <li><a href="./LibXML/XML/XPath/Object.html">LibXML::XML::XPath::Object</a>
  
    <li><a href="./LibXML/XML/XPointer.html">LibXML::XML::XPointer</a>
  
    <li><a href="./Float.html">Float</a>
  
    <li><a href="./Object.html">Object</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation" class="description">
  
<h1 id="label-LibXML+Ruby"><a href="LibXML.html">LibXML</a> Ruby</h1>

<h2 id="label-Overview">Overview</h2>

<p>The libxml gem provides Ruby language bindings for GNOME's Libxml2 XML
toolkit. It is free software, released under the MIT License.</p>

<p>We think libxml-ruby is the best XML library for Ruby because:</p>
<ul><li>
<p>Speed - Its much faster than REXML and Hpricot</p>
</li><li>
<p>Features - It provides an amazing number of featues</p>
</li><li>
<p>Conformance - It passes all 1800+ tests from the OASIS XML Tests Suite</p>
</li></ul>

<h2 id="label-Requirements">Requirements</h2>

<p>libxml-ruby requires Ruby 1.8.4 or higher.  It is dependent on  the
following libraries to function properly:</p>
<ul><li>
<p>libm      (math routines: very standard)</p>
</li><li>
<p>libz      (zlib)</p>
</li><li>
<p>libiconv</p>
</li><li>
<p>libxml2</p>
</li></ul>

<p>If you are running Linux or Unix you'll need a C compiler so the extension
can be compiled when it is installed.  If you are running Windows, then
install the Windows specific RubyGem which includes an already built
extension.</p>

<h2 id="label-INSTALLATION">INSTALLATION</h2>

<p>The easiest way to install libxml-ruby is via Ruby Gems.  To install:</p>

<p><code>gem install libxml-ruby</code></p>

<p>If you are running Windows, make sure to install the Win32 RubyGem which
includes prebuilt extensions for Ruby 1.8, 1.9 and 2.0 preview.  These
extensions are built with MinGW32 against libxml2 version 2.9.0, iconv
version 1.13 and zlib version 1.2.5.  Note these binaries are available in
the liblibs directory.  To use them, put them someplace on your path.</p>

<p>The gem also includes a Microsoft VC++ 2012 solution (useful for
debugging).</p>

<p>libxml-ruby's source codes lives on Github at <a
href="https://github.com/xml4r/libxml-ruby.">github.com/xml4r/libxml-ruby.</a></p>

<h2 id="label-Getting+Started">Getting Started</h2>

<p>Using libxml is easy. First decide what parser you want to use:</p>
<ul><li>
<p>Generally you'll want to use the <a
href="LibXML/XML/Parser.html">LibXML::XML::Parser</a> which provides a tree
based API.</p>
</li><li>
<p>For larger documents that don't fit into memory, or if you prefer an input
based API, use the <a
href="LibXML/XML/Reader.html">LibXML::XML::Reader</a>.</p>
</li><li>
<p>To parse HTML files use <a
href="LibXML/XML/HTMLParser.html">LibXML::XML::HTMLParser</a>.</p>
</li><li>
<p>If you are masochistic, then use the <a
href="LibXML/XML/SaxParser.html">LibXML::XML::SaxParser</a>, which provides
a callback API.</p>
</li></ul>

<p>Once you have chosen a parser, choose a datasource.  Libxml can parse
files, strings, URIs and IO streams.  For each data source you can specify
an <a href="LibXML/XML/Encoding.html">LibXML::XML::Encoding</a>, a base uri
and various parser options.  For more information, refer the <a
href="LibXML/XML/Parser.html#method-c-document">LibXML::XML::Parser.document</a>,
<a
href="LibXML/XML/Parser.html#method-c-file">LibXML::XML::Parser.file</a>,
<a href="LibXML/XML/Parser.html#method-c-io">LibXML::XML::Parser.io</a> or
LibXML:::XML::Parser.string methods (the same methods are defined on all
four parser classes).</p>

<h2 id="label-Advanced+Functionality">Advanced Functionality</h2>

<p>Beyond the basics of parsing and processing XML and HTML documents, libxml
provides a wealth of additional functionality.</p>

<p>Most commonly, you'll want to use its <a
href="LibXML/XML/XPath.html">LibXML::XML::XPath</a> support, which makes it
easy to find data inside a XML document.  Although not as popular, <a
href="LibXML/XML/XPointer.html">LibXML::XML::XPointer</a> provides another
API for finding data inside an XML document.</p>

<p>Often times you'll need to validate data before processing it. For example,
if you accept user generated content submitted over the Web, you'll want to
verify that it does not contain malicious code such as embedded scripts.
This can be done using libxml's powerful set of validators:</p>
<ul><li>
<p>DTDs (<a href="LibXML/XML/Dtd.html">LibXML::XML::Dtd</a>)</p>
</li><li>
<p>Relax Schemas (<a href="LibXML/XML/RelaxNG.html">LibXML::XML::RelaxNG</a>)</p>
</li><li>
<p>XML Schema (<a href="LibXML/XML/Schema.html">LibXML::XML::Schema</a>)</p>
</li></ul>

<p>Finally, if you'd like to use XSL Transformations to process data, then
install the libxslt gem which is available at <a
href="https://github.com/xml4r/libxslt-ruby.">github.com/xml4r/libxslt-ruby.</a></p>

<h2 id="label-Usage">Usage</h2>

<p>For information about using libxml-ruby please refer to its documentation
at <a
href="http://xml4r.github.com/libxml-ruby/rdoc/index.html.">xml4r.github.com/libxml-ruby/rdoc/index.html.</a>
Some tutorials are also available at <a
href="https://github.com/xml4r/libxml-ruby/wiki.">github.com/xml4r/libxml-ruby/wiki.</a></p>

<p>All libxml classes are in the <a href="LibXML/XML.html">LibXML::XML</a>
module. The easiest way to use libxml is to require 'xml'.  This will mixin
the <a href="LibXML.html">LibXML</a> module into the global namespace,
allowing you to write code like this:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">'xml'</span>
<span class="ruby-identifier">document</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
</pre>

<p>However, when creating an application or library you plan to redistribute,
it is best to not add the <a href="LibXML.html">LibXML</a> module to the
global namespace, in which case you can either write your code like this:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">'libxml'</span>
<span class="ruby-identifier">document</span> = <span class="ruby-constant">LibXML</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
</pre>

<p>Or you can utilize a namespace for your own work and include <a
href="LibXML.html">LibXML</a> into it. For example:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">'libxml'</span>

<span class="ruby-keyword">module</span> <span class="ruby-constant">MyApplication</span>
  <span class="ruby-identifier">include</span> <span class="ruby-constant">LibXML</span>

  <span class="ruby-keyword">class</span> <span class="ruby-constant">MyClass</span>
    <span class="ruby-keyword">def</span> <span class="ruby-identifier">some_method</span>
      <span class="ruby-identifier">document</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>For simplicity's sake, the documentation uses the xml module in its
examples.</p>

<h2 id="label-Memory+Management">Memory Management</h2>

<p>libxml-ruby automatically manages memory associated with the underlying
libxml2 library.  There is however one corner case that your code must
handle.  If a node is imported into a document, but not added to the
document, a segmentation fault may occur on program termination.</p>

<pre class="ruby"><span class="ruby-comment"># Do NOT do this</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">'xml'</span>
<span class="ruby-identifier">doc1</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">string</span>(<span class="ruby-string">&quot;test1&quot;</span>)
<span class="ruby-identifier">doc2</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">string</span>(<span class="ruby-string">&quot;test2&quot;</span>)
<span class="ruby-identifier">node</span> = <span class="ruby-identifier">doc2</span>.<span class="ruby-identifier">import</span>(<span class="ruby-identifier">doc1</span>.<span class="ruby-identifier">root</span>)
</pre>

<p>If doc2 is freed before node2 a segmentatin fault will occur since node2
references the document.  To avoid this, simply make sure to add the node
to the document:</p>

<pre># DO this instead
doc1 = XML::Document.string(&quot;test1&quot;)
doc2 = XML::Document.string(&quot;test2&quot;)
doc2.root &lt;&lt; doc2.import(doc1.root)</pre>

<p>Alternatively, you can call node2.remove! to disassociate node2 from doc2.</p>

<h2 id="label-Threading">Threading</h2>

<p>libxml-ruby fully supports native, background Ruby threads.  This of course
only applies to Ruby 1.9.x and higher since earlier versions of Ruby do not
support native threads.</p>

<h2 id="label-Performance">Performance</h2>

<p>In addition to being feature rich and conformation, the main reason people
use libxml-ruby is for performance.  Here are the results  of a couple
simple benchmarks recently blogged about on the Web (you can find them in
the benchmark directory of the  libxml distribution).</p>

<p>From <a
href="http://depixelate.com/2008/4/23/ruby-xml-parsing-benchmarks">depixelate.com/2008/4/23/ruby-xml-parsing-benchmarks</a></p>

<pre>              user     system      total        real
libxml    0.032000   0.000000   0.032000 (  0.031000)
Hpricot   0.640000   0.031000   0.671000 (  0.890000)
REXML     1.813000   0.047000   1.860000 (  2.031000)</pre>

<p>From <a
href="https://svn.concord.org/svn/projects/trunk/common/ruby/xml_benchmarks/">svn.concord.org/svn/projects/trunk/common/ruby/xml_benchmarks/</a></p>

<pre>              user     system      total        real
libxml    0.641000   0.031000   0.672000 (  0.672000)
hpricot   5.359000   0.062000   5.421000 (  5.516000)
rexml    22.859000   0.047000  22.906000 ( 23.203000)</pre>

<h2 id="label-Documentation">Documentation</h2>

<p>Documentation is available via rdoc, and is installed automatically with
the gem.</p>

<p>libxml-ruby's online documentation is generated using Hanna, which is a
development gem dependency.</p>

<p>Note that older versions of Rdoc, which ship with Ruby 1.8.x, will report a
number of errors.  To avoid them, install Rdoc 2.1 or higher.  Once you
have installed the gem, you'll have to disable the version of Rdoc that
Ruby 1.8.x includes.  An easy way to do that is rename the directory
uby/lib/ruby/1.8/rdoc to ruby/lib/ruby/1.8/rdoc_old.</p>

<h2 id="label-Support">Support</h2>

<p>If you have any questions about using libxml-ruby, please repor them to Git
Hub at <a
href="https://github.com/xml4r/libxml-ruby/issues">github.com/xml4r/libxml-ruby/issues</a></p>

<h2 id="label-License">License</h2>

<p>See <a href="LICENSE.html">LICENSE</a> for license information.</p>

</div>



<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

