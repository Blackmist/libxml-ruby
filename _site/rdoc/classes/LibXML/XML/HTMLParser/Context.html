<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: LibXML::XML::HTMLParser::Context [LibXML]</title>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <link href='../../../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Class</span>
          LibXML::XML::HTMLParser::Context
        </h1>
        <ol class='paths'>
          <li>
            <a href="../../../../files/ext/libxml/libxml_c.html">ext/libxml/libxml.c</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong>cXMLParserContext</strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            The <a href="Context.html">XML::HTMLParser::Context</a> class provides
            in-depth control over how a document is parsed.
            </p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public class</h3>
            <ol>
              <li><a href="#M000484">file</a></li>
              <li><a href="#M000485">io</a></li>
              <li><a href="#M000486">string</a></li>
            </ol>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000487">disable_cdata=</a></li>
              <li>
                <a href="#M000488">options=<br />
                XML::Parser::Options::NOCDATA</a>
              </li>
            </ol>
          </div>
          <div id='section'>
            <div id='methods'>
              <h2>Public class methods</h2>
              <div class='public-class method' id='method-M000484'>
                <a name='M000484'>      </a>
                <div class='synopsis'>
                  <span class='name'>XML::HTMLParser::Context.file(file) &rarr; XML::HTMLParser::Context<br /></span>
                </div>
                <div class='description'>
                  <p>
                  Creates a new parser context based on the specified file or uri.
                  </p>
                  <p>
                  Parameters:
                  </p>
                  <pre>file - A filename or uri.</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000484-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000484-source'>static VALUE rxml_html_parser_context_file(VALUE klass, VALUE file)&#x000A;{&#x000A;  htmlParserCtxtPtr ctxt = htmlCreateFileParserCtxt(StringValuePtr(file), NULL);&#x000A;  if (!ctxt)&#x000A;    rxml_raise(&amp;xmlLastError);&#x000A;&#x000A;  /* This is annoying, but xmlInitParserCtxt (called indirectly above) and &#x000A;     xmlCtxtUseOptionsInternal (called below) initialize slightly different&#x000A;     context options, in particular XML_PARSE_NODICT which xmlInitParserCtxt&#x000A;     sets to 0 and xmlCtxtUseOptionsInternal sets to 1.  So we have to call both. */&#x000A;  htmlCtxtUseOptions(ctxt, rxml_libxml_default_options());&#x000A;&#x000A;  return rxml_html_parser_context_wrap(ctxt);&#x000A;}</pre>
                </div>
              </div>
              <div class='public-class method' id='method-M000485'>
                <a name='M000485'>      </a>
                <div class='synopsis'>
                  <span class='name'>XML::HTMLParser::Context.io(io) &rarr; XML::HTMLParser::Context<br /></span>
                </div>
                <div class='description'>
                  <p>
                  Creates a new parser context based on the specified io object.
                  </p>
                  <p>
                  Parameters:
                  </p>
                  <pre>io - A ruby IO object.</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000485-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000485-source'>static VALUE rxml_html_parser_context_io(VALUE klass, VALUE io)&#x000A;{&#x000A;  VALUE result;&#x000A;  htmlParserCtxtPtr ctxt;&#x000A;  xmlParserInputBufferPtr input;&#x000A;  xmlParserInputPtr stream;&#x000A;&#x000A;  if (NIL_P(io))&#x000A;    rb_raise(rb_eTypeError, &quot;Must pass in an IO object&quot;);&#x000A;&#x000A;  input = xmlParserInputBufferCreateIO((xmlInputReadCallback) rxml_read_callback, NULL,&#x000A;                                     (void*)io, XML_CHAR_ENCODING_NONE);&#x000A;&#x000A;  ctxt = htmlNewParserCtxt();&#x000A;  if (!ctxt)&#x000A;  {&#x000A;    xmlFreeParserInputBuffer(input);&#x000A;    rxml_raise(&amp;xmlLastError);&#x000A;  }&#x000A;&#x000A;  /* This is annoying, but xmlInitParserCtxt (called indirectly above) and &#x000A;     xmlCtxtUseOptionsInternal (called below) initialize slightly different&#x000A;     context options, in particular XML_PARSE_NODICT which xmlInitParserCtxt&#x000A;     sets to 0 and xmlCtxtUseOptionsInternal sets to 1.  So we have to call both. */&#x000A;  htmlCtxtUseOptions(ctxt, rxml_libxml_default_options());&#x000A;&#x000A;  stream = xmlNewIOInputStream(ctxt, input, XML_CHAR_ENCODING_NONE);&#x000A;&#x000A;  if (!stream)&#x000A;  {&#x000A;    xmlFreeParserInputBuffer(input);&#x000A;    xmlFreeParserCtxt(ctxt);&#x000A;    rxml_raise(&amp;xmlLastError);&#x000A;  }&#x000A;  inputPush(ctxt, stream);&#x000A;  result = rxml_html_parser_context_wrap(ctxt);&#x000A;&#x000A;  /* Attach io object to parser so it won't get freed.*/&#x000A;  rb_ivar_set(result, IO_ATTR, io);&#x000A;&#x000A;  return result;&#x000A;}</pre>
                </div>
              </div>
              <div class='public-class method' id='method-M000486'>
                <a name='M000486'>      </a>
                <div class='synopsis'>
                  <span class='name'>XML::HTMLParser::Context.string(string) &rarr; XML::HTMLParser::Context<br /></span>
                </div>
                <div class='description'>
                  <p>
                  Creates a new parser context based on the specified string.
                  </p>
                  <p>
                  Parameters:
                  </p>
                  <pre>string - A string that contains the data to parse.</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000486-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000486-source'>static VALUE rxml_html_parser_context_string(VALUE klass, VALUE string)&#x000A;{&#x000A;  htmlParserCtxtPtr ctxt;&#x000A;  Check_Type(string, T_STRING);&#x000A;&#x000A;  if (RSTRING_LEN(string) == 0)&#x000A;    rb_raise(rb_eArgError, &quot;Must specify a string with one or more characters&quot;);&#x000A;&#x000A;  ctxt = xmlCreateMemoryParserCtxt(StringValuePtr(string),&#x000A;                                   RSTRING_LEN(string));&#x000A;  if (!ctxt)&#x000A;    rxml_raise(&amp;xmlLastError);&#x000A;&#x000A;  /* This is annoying, but xmlInitParserCtxt (called indirectly above) and &#x000A;     xmlCtxtUseOptionsInternal (called below) initialize slightly different&#x000A;     context options, in particular XML_PARSE_NODICT which xmlInitParserCtxt&#x000A;     sets to 0 and xmlCtxtUseOptionsInternal sets to 1.  So we have to call both. */&#x000A;  htmlCtxtUseOptions(ctxt, rxml_libxml_default_options());&#x000A;&#x000A;  htmlDefaultSAXHandlerInit();&#x000A;  if (ctxt-&gt;sax != NULL)&#x000A;    memcpy(ctxt-&gt;sax, &amp;htmlDefaultSAXHandler, sizeof(xmlSAXHandlerV1));&#x000A;  &#x000A;  return rxml_html_parser_context_wrap(ctxt);&#x000A;}</pre>
                </div>
              </div>
              <h2>Public instance methods</h2>
              <div class='public-instance method' id='method-M000487'>
                <a name='M000487'>      </a>
                <div class='synopsis'>
                  <span class='name'>context.disable_cdata = (true|false)<br /></span>
                </div>
                <div class='description'>
                  <p>
                  Control whether the CDATA nodes will be created in this context.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000487-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000487-source'>static VALUE rxml_html_parser_context_disable_cdata_set(VALUE self, VALUE bool)&#x000A;{&#x000A;  htmlParserCtxtPtr ctxt;&#x000A;  Data_Get_Struct(self, htmlParserCtxt, ctxt);&#x000A;&#x000A;  if (ctxt-&gt;sax == NULL)&#x000A;    rb_raise(rb_eRuntimeError, &quot;Sax handler is not yet set&quot;);&#x000A;&#x000A;  /* LibXML controls this internally with the default SAX handler. */ &#x000A;  if (bool)&#x000A;    ctxt-&gt;sax-&gt;cdataBlock = NULL;&#x000A;  else&#x000A;    ctxt-&gt;sax-&gt;cdataBlock = htmlDefaultSAXHandler.cdataBlock;&#x000A;&#x000A;  return bool;&#x000A;}</pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000488'>
                <a name='M000488'>      </a>
                <div class='synopsis'>
                  <span class='name'>
                    context.options = XML::Parser::Options::NOENT |<br />
                                            XML::Parser::Options::NOCDATA<br />
                  </span>
                </div>
                <div class='description'>
                  <p>
                  Provides control over the execution of a parser. Valid values are the
                  constants defined on <a
                  href="../Parser/Options.html">XML::Parser::Options</a>. Multiple options
                  can be combined by using Bitwise OR (|).
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000488-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000488-source'>static VALUE rxml_html_parser_context_options_set(VALUE self, VALUE options)&#x000A;{&#x000A;  int result;&#x000A;  htmlParserCtxtPtr ctxt;&#x000A;  Check_Type(options, T_FIXNUM);&#x000A;&#x000A;  Data_Get_Struct(self, htmlParserCtxt, ctxt);&#x000A;  result = htmlCtxtUseOptions(ctxt, NUM2INT(options));&#x000A;&#x000A;  return self;&#x000A;}</pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
